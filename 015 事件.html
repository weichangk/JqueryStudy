<!DOCTYPE html>
<!--
1. 页面载入
    1.1 ready(fn)
        当DOM载入就绪可以查询及操纵时绑定一个要执行的函数。
        这是事件模块中最重要的一个函数，因为它可以极大地提高web应用程序的响应速度。
        简单地说，这个方法纯粹是对向window.load事件注册事件的替代方法。通过使用这个方法，可以在DOM载入就绪能够读取并操纵时立即调用你所绑定的函数，而99.99%的JavaScript函数都需要在那一刻执行。

        jquery 入口函数和 window.onload 的区别
        1. jquery 入口函数可以多个；window.onload 只能一个。
        2. 执行顺序不同。
        jquery 入口函数要等待页面上的dom树加载完成后执行
        window.onload 要等待所有资源都加载完成才执行
        jQ3 之前 jquery 入口函数比 window.onload 先执行
        jQ3 对于图片、超链接等加载资源少的情况下，只有文本之类的情况下会出现 window.onload 比 jquery 入口函数先执行。

2. 事件处理
    2.1 on(events,[selector],[data],fn)             将一个或多个事件的事件处理函数附加到选定元素。
    2.2 off(events,[selector],[fn])                 在选择元素上移除一个或多个事件的事件处理函数。
    2.3 bind(type,[data],fn)                        为每个匹配元素的特定事件绑定事件处理函数。jQuery 3.0中已弃用此方法，请用 on()代替。
    2.4 unbind(type,[data|fn]])                     bind()的反向操作，从每一个匹配的元素中删除绑定的事件。jQuery 3.0中已弃用此方法，请用 off()代替。
    2.5 one(type,[data],fn)                         为每一个匹配元素的特定事件（像click）绑定一个一次性的事件处理函数。        
    2.6 trigger(type,[data])                        在每一个匹配的元素上触发某类事件。

-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>2.1 on(events,[selector],[data],fn)             将一个或多个事件的事件处理函数附加到选定元素。</h1>
    <div id="onTest">
        <p class="p1">p1</p>
        <p class="p2">p2</p>
        <span class="sp1">
            span1
            <button class="b1">sp1 按钮1</button>
            <button class="b2">sp1 按钮2</button>
        </span>
        <form class="f1" action="http://www.baidu.com">
            <input type="submit" value="f1 提交">
        </form>
        <form class="f2" action="http://cn.bing.com">
            <input type="submit" value="f2 提交">
        </form>
    </div>
    <hr>
<!---->
    <h1>2.2 off(events,[selector],[fn])                 在选择元素上移除一个或多个事件的事件处理函数。</h1>
    <div id="offTest">
        <button id="theone" style="color: red; background: yellow;">Does nothing...</button>
        <button id="bind">Add Click</button>
        <button id="unbind">Remove Click</button>
        <div style="display:none;">Click!</div>
        <p class="p1">p1</p>
    </div>
    <hr>
<!---->
    <h1>2.3 bind(type,[data],fn)                        为每个匹配元素的特定事件绑定事件处理函数。jQuery 3.0中已弃用此方法，请用 on()代替。</h1>
    <div>

    </div>
    <hr>
<!---->
    <h1>2.5 one(type,[data],fn)                         为每一个匹配元素的特定事件（像click）绑定一个一次性的事件处理函数。</h1>
    <div id="oneTest">
        <p>oneTest p</p>
    </div>
    <hr>
<!---->
    <h1>2.6 trigger(type,[data])                        在每一个匹配的元素上触发某类事件。</h1>
    <div id="triggerTest">
        <button>triggerTest b1</button>
        <button>triggerTest b2</button>
        <div><span>0</span> button #1 clicks.</div>
        <div><span>0</span> button #2 clicks.</div>
        <p class="p1">triggerTest p1</p>
        <p class="p2">triggerTest p2</p>
    </div>
    <hr>
<!---->
    <h1></h1>
    <div>

    </div>
    <hr>
<!---->
    <h1></h1>
    <div>

    </div>
    <hr>
<!---->

</body>
</html>
<script src="js/jquery-3.6.0.js"></script>
<script>
    // 1. 页面载入
    $(document).ready(function(){
        console.log("$(document).ready(function()");
    })

    $(function($){
        console.log($);
    })

    $(function(){
        console.log("$(function()");
    })

    // 2. 事件处理
    // 2.1 on(events,[selector],[data],fn)             将一个或多个事件的事件处理函数附加到选定元素。
    $("#onTest p.p1").on("click", function(){//绑定事件
        console.log($(this).text());
    })

    $("#onTest p.p2").on("click", {foo: "bar"}, p2Handler);//将数据传递给事件处理程序
    function p2Handler(event){
        console.log(event.data.foo);
    }

    $("#onTest span.sp1").on("click", function(){
        console.log("#onTest span.sp1 click");
    })
    $("#onTest span.sp1 button.b1").on("click", function(){
        console.log("#onTest span.sp1 button.b1 click");//冒泡
    })
    $("#onTest span.sp1 button.b2").on("click", function(event){
        event.stopPropagation();//阻止冒泡
        console.log("#onTest span.sp1 button.b2 click");
    })

    $("#onTest form.f1").on("submit", false);//取消表单提交操作，并通过返回false防止事件冒泡

    $("#onTest form.f2").on("submit", function(event){
        event.preventDefault();//取消默认操作
        console.log("#onTest form.f2 event.preventDefault()");
    })

    // 2.2 off(events,[selector],[fn])                 在选择元素上移除一个或多个事件的事件处理函数。
    function offTest_flash() {
        $("#offTest div").show().fadeOut("slow");
    }
    $("#bind").click(function(){
        $("#offTest").on("click", "#theone", offTest_flash).find("#theone").text("Can Click!");
    })
    $("#unbind").click(function(){
        $("#offTest").off("click", "#theone", offTest_flash).find("#theone").text("Does nothing...");
    })
    function offTest_foo(){
        console.log("offTest_foo");
        $("#offTest p.p1").off("click", offTest_foo);//只触发一次点击事件
    }
    $("#offTest p.p1").on("click", offTest_foo);

    // 2.5 one(type,[data],fn)                         为每一个匹配元素的特定事件（像click）绑定一个一次性的事件处理函数。
    $("#oneTest p").one("click", function(){
        console.log("one(type,[data],fn)");
    })

    // 2.6 trigger(type,[data])                        在每一个匹配的元素上触发某类事件。
    $("#triggerTest button").first().click(function(){
        update($("#triggerTest span").first()); 
    })
    $("#triggerTest button").last().click(function(){
        update($("#triggerTest span").last());
        $("#triggerTest button").first().trigger("click");//最后一个按钮点击触发第一个按钮点击事件
    })
    function update(j){
        var n = parseInt(j.text(), 10);
        j.text(n+1);
    }

    $("#triggerTest p.p1").click(function(event, a, b){
        console.log("#triggerTest p.p1 click:" + a + "    " + b);//手动点击不会执行触发传参，a和b都是undefined
    }).trigger("event", [ "trigger: foo", "bar" ]);
    $("#triggerTest p.p2").click(function(){
        console.log("#triggerTest p.p2 click" );
        $("#triggerTest p.p1").trigger("click");//触发p1点击事件。并将绑定在p1点击事件上的触发器参数传参
    })

</script>